!function(){"use strict";class e{constructor(e,t,s,i,n){let{name:o,link:r,_id:a,isLiked:l}=e;this.name=o,this.link=r,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteIconClick=i,this.id=a,this._handleLikeButtonClick=n,this._isLiked=l}_setEventListeners(){this._likeButton=this._element.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._handleLikeButtonClick(this)})),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this)})),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteIconClick(this)}))}handleLikeButton(e){this._isLiked=e,this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}checkLike(){return this._isLiked}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement}getCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._cardImage.src=this.link,this._cardImage.alt=this.name,this._element.querySelector(".card__text").textContent=this.name,this.handleLikeButton(this._isLiked),this._element}}class t{constructor(e,t){let{inputSelector:s,submitButtonSelector:i,inactiveButtonClass:n,inputErrorClass:o,errorClass:r}=e;this._inputSelector=s,this._submitButtonSelector=i,this._inactiveButtonClass=n,this._inputErrorClass=o,this._errorClass=r,this._form=t}_toggleButtonState(){this._inputIsInvalid(this._inputList)?this._disableButton():this._enableButton()}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_inputIsInvalid(e){return!e.every((e=>e.validity.valid))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._disableButton()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popup=document.querySelector(t)}_handleEscapeClose=e=>{"Escape"===e.key&&this.close()};open(){this._popup.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._popup.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscapeClose)}setEventListeners(){this._popup.addEventListener("click",(e=>{(e.target.classList.contains("modal_open")||e.target.classList.contains("modal__close"))&&this.close()}))}}var i=class extends s{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._submitButton=this._popup.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}_getInputValues(){return this._inputs=this._popup.querySelectorAll(".modal__input"),this._inputValues={},this._inputs.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setEventListeners(){this._form=this._popup.querySelector(".modal__form"),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),e.target.reset()})),super.setEventListeners()}handleLoad(e,t){e?(this._submitButton.textContent=t,console.log("loading"),console.log(this._submitButton)):this._submitButton.textContent=this._submitButtonText}};const n={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};document.querySelector("#profile-modal-close"),document.querySelector(".profile__name"),document.querySelector(".profile__discriptor");const o=document.querySelector("#profile-name-input"),r=document.querySelector("#profile-descriptor-input"),a=(document.querySelector("#edit-modal"),document.querySelector("#card-template").content.firstElementChild,document.querySelector(".cards__list")),l=(document.querySelector("#add-card-modal"),document.querySelector(".profile__add-button")),c=(document.querySelector("#card-modal-close"),document.querySelector("#add-card-modal-form")),d=(c.querySelector("#card-link-input"),c.querySelector("#card-title-input"),document.querySelector("#image-preview-modal"),document.querySelectorAll(".modal__close"),document.querySelectorAll(".modal"),document.querySelector(".modal__card-image"),document.querySelector(".modal__image-description"),document.querySelector(".profile__edit-button")),u=(document.querySelector(".card__delete-button"),document.querySelector(".profile__image-modal")),h=document.querySelector("#update-profile-image-modal-form");d.addEventListener("click",(function(){const e=y.getUserInfo();o.value=e.name,r.value=e.job,v.open()}));const _=document.querySelector(".modal__form");function m(e){E.open(),E.setSubmitAction((()=>{C.deleteCard(e.id).then((()=>{e.handleDeleteCard(),E.close()})).catch((e=>{console.error(e)}))}))}function p(t){return new e(t,"#card-template",b,m,f).getCard(t)}function f(e){e.checkLike()?C.removeLike(e.id).then((()=>{e.handleLikeButton(e.isLiked)})).catch((e=>{console.error(e)})):C.likeCard(e.id).then((t=>{e.isLiked=t.isLiked,e.handleLikeButton(e.isLiked)})).catch((e=>{console.error(e)}))}function b(e){L.open(e)}l.addEventListener("click",(function(){S.open()})),u.addEventListener("click",(function(){g.open()})),new t(n,_).enableValidation(),new t(n,c).enableValidation(),new t(n,h).enableValidation();const k=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._cardList=t}setItem(e){this._cardList.prepend(e)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}}({renderer:e=>{const t=p(e);k.setItem(t)}},a),L=new class extends s{constructor(e){super({popupSelector:e}),this._modalImage=this._popup.querySelector(".modal__card-image"),this._modalDescription=this._popup.querySelector(".modal__image-description")}open(e){let{name:t,link:s}=e;this._modalImage.src=s,this._modalImage.alt=t,this._modalDescription.textContent=t,super.open()}}("#image-preview-modal");L.setEventListeners();const S=new i("#add-card-modal",(function(e){S.handleLoad(!0,"Saving..."),C.addCard({name:e.title,link:e.link}).then((e=>{const t=p(e);k.setItem(t),c.reset(),S.close()})).catch((e=>{console.error(e)})).finally((()=>{S.handleLoad(!1)}))}));S.setEventListeners();const v=new i("#edit-modal",(function(e){let{name:t,discriptor:s}=e;v.handleLoad(!0,"Saving..."),C.updateUserInfo(t,s).then((e=>{console.log(e),y.setUserInfo({name:t,about:s}),v.close()})).catch((e=>{console.error(e)})).finally((()=>{v.handleLoad(!1)}))}));v.setEventListeners();const g=new i("#update-profile-image-modal",(function(e){g.handleLoad(!0,"Saving..."),C.updateProfilePicture(e.image).then((()=>{y.setProfileImage(e.image),g.close()})).catch((e=>{console.error(e)})).finally((()=>{g.handleLoad(!1)}))}));g.setEventListeners();const y=new class{constructor(e){let{name:t,job:s,profileImage:i}=e;this._name=document.querySelector(t),this._job=document.querySelector(s),this._profileImage=document.querySelector(i)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this._job.textContent=s}setProfileImage(e){this._profileImage.src=e,console.log(this._profileImage.src)}}({job:".profile__discriptor",name:".profile__name",profileImage:".profile__image"}),E=new class extends s{constructor(e){super({popupSelector:e})}setSubmitAction(e){this.handleYesButtonClick=e}setEventListeners(){this._button=this._popup.querySelector(".modal__button"),this._button.addEventListener("click",(e=>{e.preventDefault(),this.handleYesButtonClick()})),super.setEventListeners()}}("#delete-card-modal",(function(){E.close()}));E.setEventListeners();const C=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then(this._checkResponse)}updateUserInfo(e,t){return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}addCard(e){let{name:t,link:s}=e;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"407bded7-957f-4e30-ba1d-3d3bf66c7e41","Content-Type":"application/json"}});C.getUserInfo().then((e=>{console.log(e),y.setUserInfo(e),y.setProfileImage(e.avatar)})).catch((e=>{console.log(e)})),C.getInitialCards().then((e=>{console.log(e),k.renderItems(e)})).catch((e=>{console.error(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TGxELFFBQVFDLElBQUlpRCxHQUNackMsRUFBUzJDLFlBQVlOLEdBQ3JCckMsRUFBUytDLGdCQUFnQlYsRUFBS29DLE9BQU8sSUFFdEM5RCxPQUFPQyxJQUNOekIsUUFBUUMsSUFBSXdCLEVBQUksSUFHcEJKLEVBQ0cyRCxrQkFDQXpELE1BQU0yQixJQUNMbEQsUUFBUUMsSUFBSWlELEdBQ1pmLEVBQWdCUSxZQUFZTyxFQUFLLElBRWxDMUIsT0FBT0MsSUFDTnpCLFFBQVEwQixNQUFNRCxFQUFJLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEJ1dHRvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BUEkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBpc0xpa2VkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlSWNvbkNsaWNrLFxuICAgIGhhbmRsZUxpa2VCdXR0b25DbGlja1xuICApIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb25DbGljayA9IGhhbmRsZURlbGV0ZUljb25DbGljaztcbiAgICB0aGlzLmlkID0gX2lkO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayA9IGhhbmRsZUxpa2VCdXR0b25DbGljaztcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayh0aGlzKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb25DbGljayh0aGlzKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlTGlrZUJ1dHRvbihpc0xpa2VkKSB7XG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGNoZWNrTGlrZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdldENhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLm5hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gICAgdGhpcy5oYW5kbGVMaWtlQnV0dG9uKHRoaXMuX2lzTGlrZWQpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAge1xuICAgICAgaW5wdXRTZWxlY3RvcixcbiAgICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yLFxuICAgICAgaW5hY3RpdmVCdXR0b25DbGFzcyxcbiAgICAgIGlucHV0RXJyb3JDbGFzcyxcbiAgICAgIGVycm9yQ2xhc3MsXG4gICAgfSxcbiAgICBmb3JtXG4gICkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBpbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBlcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9pbnB1dElzSW52YWxpZCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9XG4gIH1cblxuICBfaW5wdXRJc0ludmFsaWQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5cIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gICAgfSk7XG5cbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgaGFuZGxlTG9hZChpc0xvYWRpbmcsIGxvYWRpbmdUZXh0KSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XG4gICAgICBjb25zb2xlLmxvZyhcImxvYWRpbmdcIik7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLl9zdWJtaXRCdXR0b24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblZhcmlhYmxlcyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcblxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5cbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcblxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5cbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7IHZhbGlkYXRpb25WYXJpYWJsZXMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmltcG9ydCBQb3B1cFdpdGhCdXR0b24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQnV0dG9uLmpzXCI7XG5cbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XG5cbmNvbnN0IHByb2ZpbGVDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1tb2RhbC1jbG9zZVwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kaXNjcmlwdG9yXCIpO1xuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0b3ItaW5wdXRcIlxuKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBjbG9zZUNhcmRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1tb2RhbC1jbG9zZVwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWwtZm9ybVwiKTtcbmNvbnN0IG5ld0NhcmRMaW5rID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1saW5rLWlucHV0XCIpO1xuY29uc3QgbmV3Q2FyZE5hbWUgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgaW1hZ2VQcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIik7XG5jb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZVwiKTtcbmNvbnN0IGNhcmRPdmVybGF5ID0gXCIjYWRkLWNhcmQtbW9kYWxcIjtcbmNvbnN0IGltYWdlT3ZlcmxheSA9IFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIjtcbmNvbnN0IG92ZXJsYXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcbmNvbnN0IGltYWdlUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcmQtaW1hZ2VcIik7XG5jb25zdCBpbWFnZVByZXZpZXdEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbWFnZS1kZXNjcmlwdGlvblwiXG4pO1xuXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBkZWxldGVDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUltYWdlQ292ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLW1vZGFsXCIpO1xuY29uc3QgcHJvZmlsZUltYWdlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3VwZGF0ZS1wcm9maWxlLWltYWdlLW1vZGFsLWZvcm1cIlxuKTtcblxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXIubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlci5qb2I7XG4gIG5ld1Byb2ZpbGVNb2RhbC5vcGVuKCk7XG59KTtcblxuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoeyBuYW1lLCBkaXNjcmlwdG9yIH0pIHtcbiAgbmV3UHJvZmlsZU1vZGFsLmhhbmRsZUxvYWQodHJ1ZSwgXCJTYXZpbmcuLi5cIik7XG4gIGFwaVxuICAgIC51cGRhdGVVc2VySW5mbyhuYW1lLCBkaXNjcmlwdG9yKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZTogbmFtZSwgYWJvdXQ6IGRpc2NyaXB0b3IgfSk7XG4gICAgICBuZXdQcm9maWxlTW9kYWwuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBuZXdQcm9maWxlTW9kYWwuaGFuZGxlTG9hZChmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVllc0J1dHRvbkNsaWNrKCkge1xuICBuZXdEZWxldGVNb2RhbC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVJY29uQ2xpY2soY2FyZCkge1xuICBuZXdEZWxldGVNb2RhbC5vcGVuKCk7XG4gIG5ld0RlbGV0ZU1vZGFsLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZUNhcmQoKTtcbiAgICAgICAgbmV3RGVsZXRlTW9kYWwuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmREYXRhLFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUljb25DbGljayxcbiAgICBoYW5kbGVMaWtlQnV0dG9uQ2xpY2tcbiAgKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdldENhcmQoY2FyZERhdGEpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VCdXR0b25DbGljayhjYXJkKSB7XG4gIGlmIChjYXJkLmNoZWNrTGlrZSgpKSB7XG4gICAgYXBpXG4gICAgICAucmVtb3ZlTGlrZShjYXJkLmlkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLmhhbmRsZUxpa2VCdXR0b24oY2FyZC5pc0xpa2VkKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBhcGlcbiAgICAgIC5saWtlQ2FyZChjYXJkLmlkKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjYXJkLmlzTGlrZWQgPSByZXMuaXNMaWtlZDtcbiAgICAgICAgY2FyZC5oYW5kbGVMaWtlQnV0dG9uKGNhcmQuaXNMaWtlZCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH1cbn1cblxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBuZXdDYXJkQ3JlYXRvck1vZGFsLm9wZW4oKTtcbn0pO1xuXG5wcm9maWxlSW1hZ2VDb3Zlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBuZXdQcm9maWxlSW1hZ2VNb2RhbC5vcGVuKCk7XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkRm9ybVN1Ym1pdChkYXRhKSB7XG4gIG5ld0NhcmRDcmVhdG9yTW9kYWwuaGFuZGxlTG9hZCh0cnVlLCBcIlNhdmluZy4uLlwiKTtcbiAgYXBpXG4gICAgLmFkZENhcmQoeyBuYW1lOiBkYXRhLnRpdGxlLCBsaW5rOiBkYXRhLmxpbmsgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICAgICAgY2FyZExpc3RDcmVhdG9yLnNldEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgYWRkQ2FyZEZvcm1FbGVtZW50LnJlc2V0KCk7XG4gICAgICBuZXdDYXJkQ3JlYXRvck1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgbmV3Q2FyZENyZWF0b3JNb2RhbC5oYW5kbGVMb2FkKGZhbHNlKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUltYWdlRm9ybVN1Ym1pdChkYXRhKSB7XG4gIG5ld1Byb2ZpbGVJbWFnZU1vZGFsLmhhbmRsZUxvYWQodHJ1ZSwgXCJTYXZpbmcuLi5cIik7XG4gIGFwaVxuICAgIC51cGRhdGVQcm9maWxlUGljdHVyZShkYXRhLmltYWdlKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFByb2ZpbGVJbWFnZShkYXRhLmltYWdlKTtcbiAgICAgIG5ld1Byb2ZpbGVJbWFnZU1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgbmV3UHJvZmlsZUltYWdlTW9kYWwuaGFuZGxlTG9hZChmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZCkge1xuICBuZXdJbWFnZU1vZGFsLm9wZW4oY2FyZCk7XG59XG5cbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25WYXJpYWJsZXMsXG4gIHByb2ZpbGVGb3JtRWxlbWVudFxuKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblZhcmlhYmxlcyxcbiAgYWRkQ2FyZEZvcm1FbGVtZW50XG4pO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwcm9maWxlSW1hZ2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25WYXJpYWJsZXMsXG4gIHByb2ZpbGVJbWFnZUZvcm1cbik7XG5wcm9maWxlSW1hZ2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgY2FyZExpc3RDcmVhdG9yID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgIGNhcmRMaXN0Q3JlYXRvci5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBjYXJkTGlzdEVsXG4pO1xuXG5jb25zdCBuZXdJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIik7XG5uZXdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IG5ld0NhcmRDcmVhdG9yTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgaGFuZGxlQWRkRm9ybVN1Ym1pdFxuKTtcbm5ld0NhcmRDcmVhdG9yTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3UHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2VkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcbik7XG5uZXdQcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3UHJvZmlsZUltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjdXBkYXRlLXByb2ZpbGUtaW1hZ2UtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUltYWdlRm9ybVN1Ym1pdFxuKTtcbm5ld1Byb2ZpbGVJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgam9iOiBcIi5wcm9maWxlX19kaXNjcmlwdG9yXCIsXG4gIG5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgcHJvZmlsZUltYWdlOiBcIi5wcm9maWxlX19pbWFnZVwiLFxufSk7XG5cbmNvbnN0IG5ld0RlbGV0ZU1vZGFsID0gbmV3IFBvcHVwV2l0aEJ1dHRvbihcbiAgXCIjZGVsZXRlLWNhcmQtbW9kYWxcIixcbiAgaGFuZGxlWWVzQnV0dG9uQ2xpY2tcbik7XG5uZXdEZWxldGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhcGkgPSBuZXcgQVBJKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI0MDdiZGVkNy05NTdmLTRlMzAtYmExZC0zZDNiZjY2YzdlNDFcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vL3VzZXIgQXBpXG5cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigoZGF0YSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgIHVzZXJJbmZvLnNldFByb2ZpbGVJbWFnZShkYXRhLmF2YXRhcik7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmFwaVxuICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICBjYXJkTGlzdENyZWF0b3IucmVuZGVySXRlbXMoZGF0YSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNhcmRMaXN0U2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NhcmRMaXN0ID0gY2FyZExpc3RTZWxlY3RvcjtcbiAgfVxuXG4gIHNldEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NhcmRMaXN0LnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fbW9kYWxJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcmQtaW1hZ2VcIik7XG4gICAgdGhpcy5fbW9kYWxEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtZGVzY3JpcHRpb25cIlxuICAgICk7XG4gIH1cblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fbW9kYWxJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9tb2RhbERlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgam9iLCBwcm9maWxlSW1hZ2UgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iKTtcbiAgICB0aGlzLl9wcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVJbWFnZSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuXG4gIHNldFByb2ZpbGVJbWFnZShpbWFnZSkge1xuICAgIHRoaXMuX3Byb2ZpbGVJbWFnZS5zcmMgPSBpbWFnZTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9wcm9maWxlSW1hZ2Uuc3JjKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEJ1dHRvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgfVxuXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLmhhbmRsZVllc0J1dHRvbkNsaWNrID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuICAgIHRoaXMuX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmhhbmRsZVllc0J1dHRvbkNsaWNrKCk7XG4gICAgfSk7XG5cbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBUEkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWVcIiwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pLnRoZW4oXG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlXG4gICAgKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzXCIsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KS50aGVuKFxuICAgICAgdGhpcy5fY2hlY2tSZXNwb25zZVxuICAgICk7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWVcIiwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHNcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSUQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSUR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgdXBkYXRlUHJvZmlsZVBpY3R1cmUobGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogbGluayB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElEKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElEfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHJlbW92ZUxpa2UoY2FyZElEKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElEfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlSWNvbkNsaWNrIiwiaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwibmFtZSIsImxpbmsiLCJfaWQiLCJpc0xpa2VkIiwidGhpcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVJY29uQ2xpY2siLCJpZCIsIl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfaXNMaWtlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jYXJkSW1hZ2UiLCJoYW5kbGVMaWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiY2hlY2tMaWtlIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldENhcmQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRJc0ludmFsaWQiLCJfaW5wdXRMaXN0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXQiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaW5wdXRMaXN0IiwiZXZlcnkiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImV2dCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImtleSIsImNsb3NlIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dHMiLCJfaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInJlc2V0IiwiaGFuZGxlTG9hZCIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiY29uc29sZSIsImxvZyIsInZhbGlkYXRpb25WYXJpYWJsZXMiLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkTGlzdEVsIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJhZGRDYXJkQnV0dG9uIiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwiZWRpdFByb2ZpbGVCdXR0b24iLCJwcm9maWxlSW1hZ2VDb3ZlciIsInByb2ZpbGVJbWFnZUZvcm0iLCJjdXJyZW50VXNlciIsInVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJuZXdQcm9maWxlTW9kYWwiLCJwcm9maWxlRm9ybUVsZW1lbnQiLCJjYXJkIiwibmV3RGVsZXRlTW9kYWwiLCJzZXRTdWJtaXRBY3Rpb24iLCJhcGkiLCJkZWxldGVDYXJkIiwidGhlbiIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJyZW1vdmVMaWtlIiwibGlrZUNhcmQiLCJyZXMiLCJuZXdJbWFnZU1vZGFsIiwibmV3Q2FyZENyZWF0b3JNb2RhbCIsIm5ld1Byb2ZpbGVJbWFnZU1vZGFsIiwiY2FyZExpc3RDcmVhdG9yIiwiY2FyZExpc3RTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NhcmRMaXN0Iiwic2V0SXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJjYXJkRWxlbWVudCIsIl9tb2RhbEltYWdlIiwiX21vZGFsRGVzY3JpcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwiZGF0YSIsImFkZENhcmQiLCJ0aXRsZSIsImZpbmFsbHkiLCJkaXNjcmlwdG9yIiwidXBkYXRlVXNlckluZm8iLCJzZXRVc2VySW5mbyIsImFib3V0IiwidXBkYXRlUHJvZmlsZVBpY3R1cmUiLCJpbWFnZSIsInNldFByb2ZpbGVJbWFnZSIsInByb2ZpbGVJbWFnZSIsIl9uYW1lIiwiX2pvYiIsIl9wcm9maWxlSW1hZ2UiLCJfcmVmMiIsImFjdGlvbiIsImhhbmRsZVllc0J1dHRvbkNsaWNrIiwiX2J1dHRvbiIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiZ2V0SW5pdGlhbENhcmRzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSUQiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==